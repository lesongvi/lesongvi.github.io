var monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),urls={Designer:{url:"https://app.cumul.io",desc:"app.cumul.io"},"Core API":{url:"https://api.cumul.io",desc:"api.cumul.io"},"Integration API":{url:"https://cdn-a.cumul.io/js/cumulio.min.js",desc:"cumulio.min.js via CDN"},"Query Engine":{url:"#",desc:""},Web:{url:"https://cumul.io",desc:"cumul.io"},Developer:{url:"https://developer.cumul.io",desc:"developer.cumul.io"},Academy:{url:"https://academy.cumul.io",desc:"academy.cumul.io"},
Blog:{url:"https://blog.cumul.io",desc:"blog.cumul.io"}};function toFormattedDate(b){return monthNames[b.getMonth()]+" "+b.getDate()}function toFormattedTime(b){return b.getHours()+":"+b.getMinutes()}
$.ajax("https://ba7ixit6v8.execute-api.eu-west-1.amazonaws.com/production/uptime").done(function(b){b=b.sort(function(a,c){return Object.keys(urls).indexOf(a.name)-Object.keys(urls).indexOf(c.name)});b.forEach(function(a){"up"===a.status?(a.status="operational",a.label="Operational"):"down"===a.status?(a.status="outage",a.label="Disrupted"):"unknown"===a.status&&(a.status="",a.label="Unknown");var c='<li><span class="status '+a.status+'">'+a.label+'</span><div class="system-name"><a href="'+urls[a.name].url+
'">'+a.name+'</a><span class="system-url"><a href="'+urls[a.name].url+'">'+urls[a.name].desc+'</a></span></div><div class="clearfix uptime-wrapper"><div class="uptime">';a.detail.forEach(function(a){900<a.downtime?(a.status="outage",a.downtimeStr=Math.floor(a.downtime/60)+"m downtime"):300<=a.downtime?(a.status="disrupted",a.downtimeStr=Math.floor(a.downtime/60)+"m downtime"):(a.status="operational",a.downtimeStr=a.downtime+"s downtime");a.percentage=Math.round(1*a.uptime/(a.uptime+a.downtime)*1E3)/
10;c+='<div class="uptime-block '+a.status+'" data-toggle="tooltip" data-html="true" title="<strong>'+toFormattedDate(new Date(1E3*a.starttime))+"</strong><br/>"+a.percentage+"%&nbsp;uptime<br/>"+a.downtimeStr+'"></div>'});c+="</div></div></li>";$(".systems").append(c)});$(".systems .uptime-block").tooltip();b.every(function(a){return"outage"===a.status})?($(".panel").toggleClass("outage",!0),$(".panel a").text("All Systems Disrupted")):b.some(function(a){return"outage"===a.status})?($(".panel").toggleClass("disrupted",
!0),$(".panel a").text("Some Systems Disrupted")):($(".panel").toggleClass("operational",!0),$(".panel a").text("All Systems Operational"));$.ajax("https://ba7ixit6v8.execute-api.eu-west-1.amazonaws.com/production/incidents").done(function(a){0<a.length&&$("#incidents-list").html("");a.forEach(function(a){$("#incidents-list").append('<div class="incident-item"><span class="date moment">'+toFormattedDate(new Date(a.created_at))+" at "+toFormattedTime(new Date(a.created_at))+'</span><span class="label '+
a.type+' float-right">'+a.type+'</span><span class="label '+a.state+' float-right">'+a.state+'</span><hr/><span class="title">'+a.title+"</span><p>"+a.description+'</p><p><a href="'+a.url+'" target="_blank">Discuss this '+a.type+"</a></p></div>")});a.some(function(a){return"open"===a.state&&"incident"===a.type})?$(".panel a").text($(".panel a").text()+" - Incident Ongoing"):a.some(function(a){return"open"===a.state&&"maintenance"===a.type})&&$(".panel a").text($(".panel a").text()+" - Maintenance Upcoming")})});